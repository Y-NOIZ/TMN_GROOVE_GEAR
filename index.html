<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>TMN 使用機材表</title>
  <style>
    body { font-family: sans-serif; padding: 1em; background: #fff; color: #000; }
    table { border-collapse: collapse; width: 100%; margin-top: 1em; }
    th, td { border: 1px solid #ccc; padding: 0.5em; text-align: left; }
    th.sortable { cursor: pointer; }
    th.sortable::after { content: " \25B4\25BE"; font-size: 0.8em; }
    input[type="checkbox"] { margin-right: 0.5em; }
  </style>
</head>
<body>
  <h1>TMN 使用機材表</h1>

  <div>
    <label><input type="checkbox" class="filter" data-col="3">RHYTHM RED TMN TOUR</label>
    <label><input type="checkbox" class="filter" data-col="4">TOUR TMN EXPO</label>
    <label><input type="checkbox" class="filter" data-col="5">TOUR TMN EXPO FINAL CRAZY 4 YOU</label>
    <label><input type="checkbox" class="filter" data-col="6">TMN 4001 DAYS GROOVE</label>
  </div>

  <table id="gearTable">
    <thead>
      <tr>
        <th class="sortable">ジャンル</th>
        <th class="sortable">メーカー</th>
        <th class="sortable">機材名</th>
        <th>RHYTHM RED TMN TOUR</th>
        <th>TOUR TMN EXPO</th>
        <th>TOUR TMN EXPO FINAL CRAZY 4 YOU</th>
        <th>TMN 4001 DAYS GROOVE</th>
        <th>備考</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>シンセサイザー・キーボード・音源</td><td>ARP</td><td>solina String-Ensemble</td><td></td><td>✓</td><td>✓</td><td></td><td></td></tr>
      <tr><td>シンセサイザー・キーボード・音源</td><td>E-mu</td><td>MORPHEUS</td><td></td><td></td><td></td><td>✓</td><td></td></tr>
      <tr><td>シンセサイザー・キーボード・音源</td><td>E-mu</td><td>PROTEUS/1</td><td></td><td></td><td></td><td>✓</td><td></td></tr>
      <tr><td>シンセサイザー・キーボード・音源</td><td>E-mu</td><td>PROTEUS/2</td><td></td><td></td><td></td><td>✓</td><td></td></tr>
    </tbody>
  </table>

  <script>
    const table = document.getElementById('gearTable');
    const headers = table.querySelectorAll('th.sortable');
    const checkboxes = document.querySelectorAll('.filter');

    headers.forEach((th, idx) => {
      th.addEventListener('click', () => {
        const tbody = table.querySelector('tbody');
        const rows = Array.from(tbody.querySelectorAll('tr'));
        const asc = th.dataset.asc !== 'true';
        th.dataset.asc = asc;

        rows.sort((a, b) => {
          const aText = a.children[idx].textContent.trim();
          const bText = b.children[idx].textContent.trim();
          return asc ? aText.localeCompare(bText) : bText.localeCompare(aText);
        });

        rows.forEach(row => tbody.appendChild(row));
      });
    });

    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        const activeFilters = Array.from(checkboxes)
          .filter(cb => cb.checked)
          .map(cb => parseInt(cb.dataset.col));

        const rows = table.querySelectorAll('tbody tr');

        rows.forEach(row => {
          const cells = row.children;
          const match = activeFilters.every(col => cells[col].textContent.trim() === '✓');
          row.style.display = (match || activeFilters.length === 0) ? '' : 'none';
        });
      });
    });
  </script>
</body>
</html>
